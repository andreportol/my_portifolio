{% extends "base.html" %}
{% load static %}

{% block title %}Projetos | André Luzardo Porto{% endblock %}

{% block content %}
    <section class="hero hero-small">
        <p class="eyebrow">Projetos & entregas</p>
        <h1 class="hero-title">Aplicações web, APIs e automações com Python, Django e IA.</h1>
        <p class="hero-lead">
            Projetos recentes que combinam back-end sólido, integrações com IA e deploy pronto no Railway. Código organizado, documentação curta e foco em resolver problemas de negócio rápido.
        </p>
        <div class="d-flex flex-wrap gap-3">
            <a href="https://github.com/andreportol?tab=repositories" class="btn-cta" target="_blank" rel="noopener noreferrer">Ver repositórios</a>
            <a href="{% url 'core:contato' %}" class="btn-ghost">Precisa de algo parecido?</a>
        </div>
    </section>

    <section class="row g-3">
        <div class="col-md-6">
            <div class="project-card h-100">
                <div class="project-thumb">
                    <video class="lazy-video" width="100%" height="280" controls preload="none" playsinline poster="{% static 'img/projeto-80-branco.png' %}">
                        <source data-src="{% static 'videos/alpfaturas.mp4' %}" type="video/mp4">
                        Seu navegador não suporta o elemento de vídeo.
                    </video>
                </div>
                <div>
                    <h5>Langchain e Django</h5>
                    <p>SaaS que interpreta faturas de energia elétrica com LangChain + Django, layout personalizados e exportação pronta para o financeiro.</p>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <span class="pill">Langchain</span>
                    <span class="pill">Django</span>
                    <span class="pill">Python</span>
                    <span class="pill">PostgreSQL</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <a href="https://www.youtube.com/watch?v=Epm26vg4MPg" class="btn-ghost" target="_blank" rel="noopener noreferrer">Ver vídeo</a>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="project-card h-100">
                <div class="project-thumb">
                    <video class="lazy-video" width="100%" height="280" controls preload="none" playsinline poster="{% static 'img/projeto-80-branco.png' %}">
                        <source data-src="{% static 'videos/video_transportador.mp4' %}" type="video/mp4">
                        Seu navegador não suporta o elemento de vídeo.
                    </video>
                </div>
                <div>
                    <h5>Aplicativo para pedidos de caçambas</h5>
                    <p>Aplicativo para solicitar caçambas de entulho com fluxo de aprovação, dashboard para a equipe acompanhar solicitações em tempo real.</p>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <span class="pill">Python</span>
                    <span class="pill">Django</span>
                    <span class="pill">PostgreSQL</span>
                    <span class="pill">CSS</span>
                    <span class="pill">Bootstrap</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-warning">Privado no GitHub</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="project-card h-100">
                <div class="project-thumb">
                    <video class="lazy-video" width="100%" height="280" controls preload="none" playsinline poster="{% static 'img/projeto-80-branco.png' %}">
                        <source data-src="{% static 'videos/ecomerce.mp4' %}" type="video/mp4">
                        Seu navegador não suporta o elemento de vídeo.
                    </video>
                </div>
                <div>
                    <h5>Modelo de e-comerce</h5>
                    <p>Template de e-commerce com catálogo, carrinho e checkout básico usando Django, Bootstrap e PostgreSQL.</p>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <span class="pill">Django</span>
                    <span class="pill">Bootstrap</span>
                    <span class="pill">PostgreSQL</span>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="project-card h-100">
                <div class="project-thumb">
                    <video class="lazy-video" width="100%" height="280" controls preload="none" playsinline poster="{% static 'img/projeto-80-branco.png' %}">
                        <source data-src="{% static 'videos/video.mp4' %}" type="video/mp4">
                        Seu navegador não suporta o elemento de vídeo.
                    </video>
                </div>
                <div>
                    <h5>Gestão de Áreas Públicas</h5>
                    <p>Workflow para Gerência de Áreas Públicas: cadastro de invasões, laudos, prazos e notificações automatizadas. Relatórios e autenticação segura com Django + PostgreSQL.</p>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <span class="pill">Django + PostgreSQL</span>
                    <span class="pill">Relatórios</span>
                    <span class="pill">Deploy via Docker</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-warning">Privado no GitHub</small>
                </div>            
            </div>
        </div>
        <div class="col-md-4">
            <div class="project-card h-100">
               <div class="project-thumb">
                    <video class="lazy-video" width="100%" height="280" controls preload="none" playsinline poster="{% static 'img/projeto-80-branco.png' %}">
                        <source data-src="{% static 'videos/boeira_faturas.mp4' %}" type="video/mp4">
                        Seu navegador não suporta o elemento de vídeo.
                    </video>
                </div>
                <div>
                    <h5>API de automação de faturas elétricas com IA</h5>
                    <p>API em Streamlit + LangChain que orquestra LLMs para sumarizar e classificar faturas, com fila síncrona e logs de auditoria.</p>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <span class="pill">Streamlit</span>
                    <span class="pill">LLM</span>
                    <span class="pill">Langchain</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <a href="https://www.youtube.com/watch?v=be7E_3R8Uac" class="btn-ghost" target="_blank" rel="noopener noreferrer">Ver Vídeo</a>
                </div> 
            </div>
        </div>
        <div class="col-md-6">
            <div class="project-card h-100">
                <div class="project-thumb">
                    <video class="lazy-video" width="100%" height="280" controls preload="none" playsinline poster="{% static 'img/projeto-80-branco.png' %}">
                        <source data-src="{% static 'videos/videoGeo.mp4' %}" type="video/mp4">
                        Seu navegador não suporta o elemento de vídeo.
                    </video>
                </div>
                <div>
                    <h5>Projeto iniciado em 2023 usando técnicas de geoprocessamento</h5>
                    <p>Prova de conceito de geoprocessamento com GeoServer, GeoDjango e PostGIS, incluindo mapas temáticos e geocodificação.</p>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <span class="pill">Python</span>
                    <span class="pill">GeoDjango</span>
                    <span class="pill">Postgis</span>
                    <span class="pill">GeoServer</span>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="project-card h-100">
                <div class="project-thumb">
                    <video class="lazy-video" width="100%" height="280" controls preload="none" playsinline poster="{% static 'img/projeto-80-branco.png' %}">
                        <source data-src="{% static 'videos/video_transportador.mp4' %}" type="video/mp4">
                        Seu navegador não suporta o elemento de vídeo.
                    </video>
                </div>
                <div>
                    <h5>Aplicativo para controle de estoque usando técnicas de IA</h5>
                    <p>Aplicativo de estoque com consultas em linguagem natural via LLM e painel tradicional para consultas rápidas, com trilha de auditoria e geração de relatórios.</p>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <span class="pill">Agents</span>
                    <span class="pill">Langchain</span>
                    <span class="pill">LLM</span>
                    <span class="pill">Python</span>
                    <span class="pill">PostgreSQL</span>
                </div>
            </div>
        </div>
    </section>
    <script>
        // Carrega os vídeos apenas quando entram na área visível para melhorar a performance
        document.addEventListener('DOMContentLoaded', function () {
            const lazyVideos = document.querySelectorAll('video.lazy-video');
            if (!lazyVideos.length) {
                return;
            }

            const loadVideo = (video) => {
                const sources = video.querySelectorAll('source[data-src]');
                sources.forEach((source) => {
                    source.src = source.dataset.src;
                });
                video.load();
            };

            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries, obs) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            loadVideo(entry.target);
                            obs.unobserve(entry.target);
                        }
                    });
                }, { rootMargin: '200px 0px' });

                lazyVideos.forEach((video) => observer.observe(video));
            } else {
                lazyVideos.forEach(loadVideo);
            }
        });
    </script>
{% endblock %}
